{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Andrew/Desktop/VDProject/Valentines_Creation/valentine-gift/lib/prisma.js"],"sourcesContent":["// lib/prisma.js\r\nimport { PrismaClient } from \"@prisma/client\";\r\nimport { PrismaPg } from '@prisma/adapter-pg';\r\nimport \"dotenv/config\"; // ensure env vars are loaded\r\n\r\n// const globalForPrisma = globalThis;\r\n\r\nconst connectionString = process.env.DATABASE_URL;\r\nconst adapter = new PrismaPg({ connectionString });\r\nconst prisma = new PrismaClient({ adapter });\r\nexport {prisma};\r\n\r\n// export const prisma =\r\n//   globalForPrisma.prisma ||\r\n//   new PrismaClient({\r\n//     log: [\"query\"], // optional\r\n//     // adapter: \"postgresql\", // <--- REQUIRED in Prisma 7 for local Postgres\r\n//   });\r\n\r\n// if (process.env.NODE_ENV !== \"production\") {\r\n//   globalForPrisma.prisma = prisma;\r\n// }\r\n"],"names":[],"mappings":";;;;AAAA,gBAAgB;AAChB;AACA;AACA,sOAAwB,6BAA6B;;;;;;;;AAErD,sCAAsC;AAEtC,MAAM,mBAAmB,QAAQ,GAAG,CAAC,YAAY;AACjD,MAAM,UAAU,IAAI,yKAAQ,CAAC;IAAE;AAAiB;AAChD,MAAM,SAAS,IAAI,sMAAY,CAAC;IAAE;AAAQ;;CAG1C,wBAAwB;CACxB,8BAA8B;CAC9B,uBAAuB;CACvB,kCAAkC;CAClC,gFAAgF;CAChF,QAAQ;CAER,+CAA+C;CAC/C,qCAAqC;CACrC,IAAI"}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Andrew/Desktop/VDProject/Valentines_Creation/valentine-gift/src/app/api/gift/create/route.js"],"sourcesContent":["// import { NextResponse } from \"next/server\";\r\n// import { prisma } from \"@/../lib/prisma\";\r\n// import { randomUUID } from \"crypto\";\r\n\r\n// export async function POST(req) {\r\n//   const body = await req.json();\r\n\r\n//   const gift = await prisma.gift.create({\r\n//     data: {\r\n//       slug: randomUUID().slice(0, 8),\r\n//       senderName: body.senderName,\r\n//       recipientName: body.recipientName,\r\n//       questionText: body.questionText,\r\n//       theme: body.theme,\r\n//       giftType: body.giftType,\r\n//       giftConfig: body.giftConfig,\r\n//     },\r\n//   });\r\n\r\n//   return NextResponse.json({ slug: gift.slug });\r\n// }\r\n\r\n\r\n// app/api/gift/create/route.js\r\nimport { NextResponse } from \"next/server\";\r\nimport { prisma } from \"@/../lib/prisma\";\r\nimport { randomUUID } from \"crypto\";\r\n\r\nexport async function POST(req) {\r\n  try {\r\n    const body = await req.json();\r\n    console.log(\"Received body:\", body); \r\n\r\n    // Validate required fields\r\n    if (!body.senderName || !body.recipientName || !body.questionText) {\r\n      return NextResponse.json(\r\n        { error: \"Missing required fields\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const gift = await prisma.gift.create({\r\n      data: {\r\n        slug: randomUUID().slice(0, 8),\r\n        senderName: body.senderName,\r\n        recipientName: body.recipientName,\r\n        questionText: body.questionText,\r\n        // customMessage: body.customMessage || null,\r\n        \r\n        // Customization\r\n        theme: body.theme || \"classic\",\r\n        backgroundColor: body.backgroundColor || \"#FFF5F7\",\r\n        accentColor: body.accentColor || \"#FF69B4\",\r\n        backgroundImage: body.backgroundImage || null,\r\n        giftWrapping: body.giftWrapping || \"heart\",\r\n        \r\n        // Gift details\r\n        giftType: body.giftType,\r\n        giftConfig: body.giftConfig || {},\r\n      },\r\n    });\r\n\r\n    console.log(\"Created gift:\", gift); \r\n    console.log(\"Slug:\", gift.slug); \r\n\r\n    return NextResponse.json({ slug: gift.slug });\r\n  } catch (error) {\r\n    console.error(\"Full Error:\", error);\r\n    return NextResponse.json(\r\n      { error: \"error creating link\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA,8CAA8C;AAC9C,4CAA4C;AAC5C,uCAAuC;AAEvC,oCAAoC;AACpC,mCAAmC;AAEnC,4CAA4C;AAC5C,cAAc;AACd,wCAAwC;AACxC,qCAAqC;AACrC,2CAA2C;AAC3C,yCAAyC;AACzC,2BAA2B;AAC3B,iCAAiC;AACjC,qCAAqC;AACrC,SAAS;AACT,QAAQ;AAER,mDAAmD;AACnD,IAAI;AAGJ,+BAA+B;AAC/B;AACA;AACA;;;;;;;;AAEO,eAAe,KAAK,GAAG;IAC5B,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,QAAQ,GAAG,CAAC,kBAAkB;QAE9B,2BAA2B;QAC3B,IAAI,CAAC,KAAK,UAAU,IAAI,CAAC,KAAK,aAAa,IAAI,CAAC,KAAK,YAAY,EAAE;YACjE,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA0B,GACnC;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,OAAO,MAAM,yHAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YACpC,MAAM;gBACJ,MAAM,IAAA,mHAAU,IAAG,KAAK,CAAC,GAAG;gBAC5B,YAAY,KAAK,UAAU;gBAC3B,eAAe,KAAK,aAAa;gBACjC,cAAc,KAAK,YAAY;gBAC/B,6CAA6C;gBAE7C,gBAAgB;gBAChB,OAAO,KAAK,KAAK,IAAI;gBACrB,iBAAiB,KAAK,eAAe,IAAI;gBACzC,aAAa,KAAK,WAAW,IAAI;gBACjC,iBAAiB,KAAK,eAAe,IAAI;gBACzC,cAAc,KAAK,YAAY,IAAI;gBAEnC,eAAe;gBACf,UAAU,KAAK,QAAQ;gBACvB,YAAY,KAAK,UAAU,IAAI,CAAC;YAClC;QACF;QAEA,QAAQ,GAAG,CAAC,iBAAiB;QAC7B,QAAQ,GAAG,CAAC,SAAS,KAAK,IAAI;QAE9B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,MAAM,KAAK,IAAI;QAAC;IAC7C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,eAAe;QAC7B,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAsB,GAC/B;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}