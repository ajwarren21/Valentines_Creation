{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Andrew/Desktop/VDProject/Valentines_Creation/valentine-gift/src/app/api/gift/%5Bslug%5D/route.js"],"sourcesContent":["import { fulfillGift } from \"@/lib/fulfillment\";\r\n\r\nexport async function PATCH(req, { params }) {\r\n  const gift = await prisma.gift.findUnique({\r\n    where: { slug: params.slug },\r\n  });\r\n\r\n  if (!gift || gift.status === \"ACCEPTED\") {\r\n    return NextResponse.json({ error: \"Invalid state\" }, { status: 400 });\r\n  }\r\n\r\n  const fulfillmentResult = await fulfillGift(gift);\r\n\r\n  await prisma.gift.update({\r\n    where: { id: gift.id },\r\n    data: {\r\n      status: \"FULFILLED\",\r\n      respondedAt: new Date(),\r\n      giftConfig: {\r\n        ...gift.giftConfig,\r\n        fulfillmentResult,\r\n      },\r\n    },\r\n  });\r\n\r\n  return NextResponse.json({ fulfillmentResult });\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAEO,eAAe,MAAM,GAAG,EAAE,EAAE,MAAM,EAAE;IACzC,MAAM,OAAO,MAAM,OAAO,IAAI,CAAC,UAAU,CAAC;QACxC,OAAO;YAAE,MAAM,OAAO,IAAI;QAAC;IAC7B;IAEA,IAAI,CAAC,QAAQ,KAAK,MAAM,KAAK,YAAY;QACvC,OAAO,aAAa,IAAI,CAAC;YAAE,OAAO;QAAgB,GAAG;YAAE,QAAQ;QAAI;IACrE;IAEA,MAAM,oBAAoB,MAAM,YAAY;IAE5C,MAAM,OAAO,IAAI,CAAC,MAAM,CAAC;QACvB,OAAO;YAAE,IAAI,KAAK,EAAE;QAAC;QACrB,MAAM;YACJ,QAAQ;YACR,aAAa,IAAI;YACjB,YAAY;gBACV,GAAG,KAAK,UAAU;gBAClB;YACF;QACF;IACF;IAEA,OAAO,aAAa,IAAI,CAAC;QAAE;IAAkB;AAC/C"}}]
}